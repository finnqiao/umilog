# UmiLog End-to-End UX/UI & Feature Audit (2026-01-01)

## Scope
- iOS app in this repo (SwiftUI, iOS 17+)
- UX/UI flows: Map, Search/Filters, Site Inspect, Plan, Log (Quick + Wizard), History, Wildlife, Profile
- Ancillary features present in code: Settings, Dashboard, Site Explorer, Geofencing/Notifications
- Assets and design system alignment

## Method
- Docs review: `README.md`, `DESIGN.md`, `ARCHITECTURE.md`, `TODO.md`, `docs/UI_FLOWS_AUDIT.md`, `ASSETS.md`
- Code review: `UmiLog/UmiLogApp.swift`, `Modules/FeatureMap`, `Modules/FeatureLiveLog`, `Modules/FeatureHistory`, `Modules/UmiLocationKit`, `Modules/UmiDesignSystem`
- Simulator run (Debug build) and capture

## Environment
- Xcode 26.0.1
- Simulator: iPhone 16 Pro (iOS 18.6)
- Build command: `xcodebuild -project UmiLog.xcodeproj -scheme UmiLog -destination 'platform=iOS Simulator,name=iPhone 16 Pro,OS=18.6' -configuration Debug build`

## Screenshots
Captured
- `docs/screens/01-map.png` (Map tab)
- `docs/screens/02-history.png` (History empty state)
- `docs/screens/03-log-launcher.png` (Log launcher sheet)
- `docs/screens/04-quick-log.png` (Quick Log)
- `docs/screens/05-live-log-step1.png` (Live Log Step 1)
- `docs/screens/08-live-log-step2-metrics.png` (Live Log Step 2)
- `docs/screens/09-live-log-step3.png` (Live Log Step 3)
- `docs/screens/10-live-log-step4.png` (Live Log Step 4)
- `docs/screens/06-site-picker.png` (Site picker)
- `docs/screens/11-wildlife.png` (Wildlife)
- `docs/screens/12-profile.png` (Profile)

Not captured (blocked by UI automation limits)
- Map Search sheet (search icon not reachable via UI automation)
- Map Filters sheet (filter icon not reachable via UI automation)
- Map Site Inspect expanded card (requires drag gesture)
- Map Plan sheet (requires plan button in Inspect)
- Map Featured Destination card (first-launch only)
- Settings / Site Explorer / Dashboard flows (not in nav)

Manual capture steps for remaining flows: `docs/MANUAL_SCREENSHOT_STEPS.md`

## Flow Coverage (Current State)
| Flow | Status | Notes |
| --- | --- | --- |
| Map (Discover) | Partial | Map renders, unified surface, search/filter UI present; several filters and layers not fully wired. |
| Map (My Sites lens) | Partial | Filter lens exists; persistence present; UI is mixed with legacy scope/state. |
| Search (Map) | Partial | In-memory search across sites/areas/regions/species; no FTS ranking; limited filter depth. |
| Filters (Map) | Partial | Difficulty/site type apply; showShops toggle not wired to map; depth range not exposed. |
| Site Inspect | Partial | Detail view, wishlist toggle, log CTA work; plan entry is UI-only. |
| Plan (Trip) | Missing | UI exists but no persistence; Save Trip is TODO. |
| Log Launcher | Working | Center tab opens Quick Log / Live Log chooser. |
| Live Log Wizard | Partial | Steps 1–4 present; styling and review UX are basic; no post-save routing. |
| Quick Log | Partial | Works with last dive + GPS; location permission UX not handled. |
| History | Working | List, search, detail, delete, refresh are implemented. |
| Wildlife | Partial | Species list + search works; “This area” scope does not change results. |
| Profile | Partial | Stats wired; achievements and actions are placeholders; settings toggles static. |
| Settings | Not Wired | Export/import and pending GPS flows exist but not navigable. |
| Dashboard (Home) | Not Wired | Dashboard UI exists but not in navigation. |
| Site Explorer | Not Wired | List/detail UI exists but not in navigation. |

## Gaps

### Functional / Product
- Map “Nearby” and location-based filters are stubbed; no reliable user-location flow or permission UX is wired into Map discovery.
- Trip planning flow is UI-only (no persistence, no dates, Save Trip TODO); planned state cannot survive app restarts.
- Geofencing and notifications are initialized but permissions are never requested in-app; auto-log prompts likely never fire.
- Wildlife “This area” scope has no filtering logic, so it behaves identically to “All-time.”
- Quick Log location actions call LocationService directly; errors are only logged and not surfaced in the UI.

### Navigation / Information Architecture
- `FeatureHome` (Dashboard), `FeatureSites` (Site Explorer), and `FeatureSettings` are implemented but unreachable from the current TabView.
- History is a dedicated tab, while docs and TODO specify “My Dive Sites → Timeline”; IA is out of sync with the stated roadmap.
- Profile lacks a Settings entry point, so export/import and pending GPS flows are effectively hidden.
- Layers/Dive Lens affordances in docs do not have a corresponding user-facing UI in the current map surface.

### UX/UI & Visual Design
- Underwater theme is strongest on Map, but other tabs use system backgrounds and default components, creating visual fragmentation.
- Accent colors are inconsistent (purple/green/orange usage in Wildlife and Live Log vs. the underwater palette), weakening brand cohesion.
- Form styling varies across Log flows (system rounded borders vs. custom chips), making core tasks feel unfinished.
- Default map center is hard-coded to South Africa, which is jarring for most users and hides the “near me” promise.
- Plan and “Add site” affordances are present but lead to no action, creating dead-end UI states.

### Accessibility & Usability
- UnderwaterTheme runs continuous motion effects without a Reduce Motion check, risking motion sensitivity issues.
- Several custom chips and buttons (e.g., Wildlife scope chips, Quick Log actions) lack explicit accessibility labels.
- Permission denial and empty-data states are not consistently handled with actionable CTAs.
- Gradient-heavy Profile header may not meet AA contrast in all text combinations.

### Data, Assets, and Content
- Production media coverage is incomplete; many sites/species rely on placeholders despite image-driven UX goals.
- `ASSETS.md` still contains placeholder attribution entries (e.g., Unsplash source URLs and authors).
- Species imagery appears icon-based rather than photo-based; mismatch with “image-first” positioning.
- Settings for import/export are present but not exposed, limiting the practical value of data assets.

### Technical Quality / Implementation
- `showShops` is maintained as a separate Map state and is not bound to `ExploreFilters.showShops`, so the Filter UI does not reliably control shop visibility.
- Search uses in-memory filtering over `viewModel.sites` and may degrade with large datasets; no FTS or ranking strategy is used in the map search UI.
- App seeding runs at launch without a visible loading or failure state; users can encounter a blank map with no explanation.
- Notification flow posts `startLiveLogRequested` via userInfo in one path and object in another; inconsistent signaling is a future source of bugs.

## Strengths Worth Preserving
- Underwater palette and glassy UI components are cohesive and distinctive in Map flows.
- The unified bottom surface architecture is a solid foundation for simplifying map state transitions.
- History and basic logging flows are functional and stable with clean, readable UI.
- Async image loading includes a sensible gradient fallback for missing media.
